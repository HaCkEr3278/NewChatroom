<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DnD Adventure Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        button {
            margin: 5px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>DnD Adventure Game</h1>
        <div id="game">
            <div id="output"></div>
            <div id="actions"></div>
        </div>
    </div>

    <script>
        class Character {
            constructor(name, charClass) {
                this.name = name;
                this.charClass = charClass;
                this.inventory = [];
                this.health = 100;
                this.damage = Math.floor(Math.random() * 11) + 10; // Random damage between 10-20
            }
        }

        class Game {
            constructor() {
                this.character = null;
                this.locations = ["a dark forest", "a bustling city", "a desolate desert", "a snowy mountain", "an abandoned castle"];
                this.spawnLocation = "";
                this.init();
            }

            init() {
                const output = document.getElementById("output");
                const actions = document.getElementById("actions");
                output.innerHTML = "<p>Welcome to the DnD Adventure Game!</p>";

                actions.innerHTML = `
                    <label>Enter your character's name: <input id="charName" type="text"></label><br>
                    <label>Choose your class: 
                        <select id="charClass">
                            <option value="Warrior">Warrior</option>
                            <option value="Mage">Mage</option>
                            <option value="Rogue">Rogue</option>
                        </select>
                    </label><br>
                    <button onclick="game.createCharacter()">Start Game</button>
                `;
            }

            createCharacter() {
                const name = document.getElementById("charName").value;
                const charClass = document.getElementById("charClass").value;

                if (!name) {
                    alert("Please enter a name.");
                    return;
                }

                this.character = new Character(name, charClass);
                this.spawnLocation = this.randomSpawn();

                this.updateOutput(`<p>You are ${this.character.name}, the ${this.character.charClass}. You spawn in ${this.spawnLocation}.</p>`);
                this.showActions();
            }

            randomSpawn() {
                return this.locations[Math.floor(Math.random() * this.locations.length)];
            }

            updateOutput(message) {
                const output = document.getElementById("output");
                output.innerHTML += message;
            }

            showActions() {
                const actions = document.getElementById("actions");
                actions.innerHTML = `
                    <button onclick="game.checkInventory()">Check Inventory</button>
                    <button onclick="game.explore()">Explore</button>
                    <button onclick="game.rest()">Rest</button>
                    <button onclick="game.exitGame()">Exit Game</button>
                `;
            }

            checkInventory() {
                if (this.character.inventory.length === 0) {
                    this.updateOutput("<p>Your inventory is empty.</p>");
                } else {
                    this.updateOutput(`<p>Your inventory contains: ${this.character.inventory.join(", ")}.</p>`);
                }
            }

            explore() {
                const events = [
                    "You find a treasure chest!",
                    "A wild beast appears!",
                    "You meet a mysterious traveler.",
                    "You stumble upon an ancient artifact.",
                    "You fall into a hidden trap!"
                ];
                const event = events[Math.floor(Math.random() * events.length)];
                this.updateOutput(`<p>${event}</p>`);

                if (event === "You find a treasure chest!") {
                    const loot = ["gold coins", "a magical potion", "a rare gemstone"];
                    const item = loot[Math.floor(Math.random() * loot.length)];
                    this.updateOutput(`<p>Inside, you find ${item}!</p>`);
                    this.character.inventory.push(item);

                } else if (event === "A wild beast appears!") {
                    this.fightBeast();

                } else if (event === "You meet a mysterious traveler.") {
                    if (confirm("Do you trade with the traveler?")) {
                        const tradeItem = ["a map", "a rare herb", "an enchanted ring"];
                        const item = tradeItem[Math.floor(Math.random() * tradeItem.length)];
                        this.updateOutput(`<p>The traveler gives you ${item}.</p>`);
                        this.character.inventory.push(item);
                    } else {
                        this.updateOutput("<p>The traveler walks away.</p>");
                    }

                } else if (event === "You stumble upon an ancient artifact.") {
                    const artifact = ["a glowing sword", "a mystical staff", "a shield of light"];
                    const item = artifact[Math.floor(Math.random() * artifact.length)];
                    this.updateOutput(`<p>You discover ${item}. It feels powerful!</p>`);
                    this.character.inventory.push(item);

                } else if (event === "You fall into a hidden trap!") {
                    const damage = Math.floor(Math.random() * 16) + 5;
                    this.character.health -= damage;
                    this.updateOutput(`<p>You took ${damage} damage. Your health is now ${this.character.health}.</p>`);
                    if (this.character.health <= 0) {
                        this.updateOutput("<p>You have perished. Game over.</p>");
                        this.endGame();
                    }
                }
            }

            fightBeast() {
                let beastHealth = Math.floor(Math.random() * 31) + 20;
                this.updateOutput(`<p>A wild beast appears with ${beastHealth} health!</p>`);

                while (beastHealth > 0 && this.character.health > 0) {
                    const attack = confirm("Do you attack the beast?");

                    if (attack) {
                        const damage = this.character.damage;
                        beastHealth -= damage;
                        this.updateOutput(`<p>You hit the beast for ${damage} damage. Beast's health is now ${beastHealth}.</p>`);

                        if (beastHealth > 0) {
                            const beastDamage = Math.floor(Math.random() * 11) + 5;
                            this.character.health -= beastDamage;
                            this.updateOutput(`<p>The beast attacks you for ${beastDamage} damage. Your health is now ${this.character.health}.</p>`);
                        }
                    } else {
                        this.updateOutput("<p>You ran away from the beast.</p>");
                        return;
                    }
                }

                if (beastHealth <= 0) {
                    this.updateOutput("<p>You defeated the beast and found a claw as a trophy.</p>");
                    this.character.inventory.push("beast claw");
                }

                if (this.character.health <= 0) {
                    this.updateOutput("<p>You have perished. Game over.</p>");
                    this.endGame();
                }
            }

            rest() {
                const heal = Math.floor(Math.random() * 16) + 10;
                this.character.health = Math.min(100, this.character.health + heal);
                this.updateOutput(`<p>You rested and regained ${heal} health. Your health is now ${this.character.health}.</p>`);
            }

            exitGame() {
                this.updateOutput("<p>Thank you for playing!</p>");
                this.endGame();
            }

            endGame() {
                document.getElementById("actions").innerHTML = "";
            }
        }

        const game = new Game();
    </script>
</body>
</html>
