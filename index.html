<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DnD Adventure Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        button {
            margin: 5px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>DnD Adventure Game</h1>
        <div id="game">
            <div id="output"></div>
            <div id="actions"></div>
        </div>
    </div>

    <script>
        class Character {
            constructor(name, charClass) {
                this.name = name;
                this.charClass = charClass;
                this.inventory = [];
                this.health = charClass === "Warrior" ? 150 : 100;
                this.damage = charClass === "Mage" ? 25 : charClass === "Rogue" ? 15 : 20;
            }

            specialAbility() {
                if (this.charClass === "Mage") {
                    return "casts a powerful spell";
                } else if (this.charClass === "Rogue") {
                    return Math.random() < 0.5 ? "goes invisible and avoids the attack" : "fails to go invisible";
                } else if (this.charClass === "Warrior") {
                    return "delivers a mighty blow";
                }
            }
        }

        class Game {
            constructor() {
                this.character = null;
                this.locations = ["a dark forest", "a bustling city", "a desolate desert", "a snowy mountain", "an abandoned castle"];
                this.spawnLocation = "";
                this.storyIndex = 0;
                this.stories = [
                    "You discover a hidden cave filled with glowing crystals. Inside, you find a small chest.",
                    "You come across an abandoned village. The silence is eerie, but something catches your eye.",
                    "You find a sparkling stream and decide to rest. Nearby, there's a strange carved stone.",
                    "You encounter a towering tree with golden leaves. At its base, there seems to be an inscription.",
                    "You walk into a clearing and spot a strange, ancient statue covered in moss."
                ];
                this.init();
            }

            init() {
                const output = document.getElementById("output");
                const actions = document.getElementById("actions");
                output.innerHTML = "<p>Welcome to the DnD Adventure Game!</p>";

                actions.innerHTML = `
                    <label>Enter your character's name: <input id="charName" type="text"></label><br>
                    <label>Choose your class: 
                        <select id="charClass">
                            <option value="Warrior">Warrior</option>
                            <option value="Mage">Mage</option>
                            <option value="Rogue">Rogue</option>
                        </select>
                    </label><br>
                    <button onclick="game.createCharacter()">Start Game</button>
                `;
            }

            createCharacter() {
                const name = document.getElementById("charName").value;
                const charClass = document.getElementById("charClass").value;

                if (!name) {
                    alert("Please enter a name.");
                    return;
                }

                this.character = new Character(name, charClass);
                this.spawnLocation = this.randomSpawn();

                this.updateOutput(`<p>You are ${this.character.name}, the ${this.character.charClass}. You spawn in ${this.spawnLocation}.</p>`);
                this.showActions();
            }

            randomSpawn() {
                return this.locations[Math.floor(Math.random() * this.locations.length)];
            }

            updateOutput(message) {
                const output = document.getElementById("output");
                output.innerHTML += message;
            }

            showActions() {
                const actions = document.getElementById("actions");
                actions.innerHTML = `
                    <button onclick="game.checkInventory()">Check Inventory</button>
                    <button onclick="game.explore()">Explore</button>
                    <button onclick="game.rest()">Rest</button>
                    <button onclick="game.fightBeast()">Fight Beast</button>
                    <button onclick="game.exitGame()">Exit Game</button>
                `;
            }

            checkInventory() {
                if (this.character.inventory.length === 0) {
                    this.updateOutput("<p>Your inventory is empty.</p>");
                } else {
                    this.updateOutput(`<p>Your inventory contains: ${this.character.inventory.join(", ")}.</p>`);
                }
            }

            explore() {
                if (this.storyIndex < this.stories.length) {
                    const story = this.stories[this.storyIndex];
                    this.updateOutput(`<p>${story}</p>`);
                    this.storyIndex++;
                } else {
                    this.updateOutput("<p>You have explored all the stories available.</p>");
                }
            }

            fightBeast() {
                let beastHealth = Math.floor(Math.random() * 31) + 20;
                this.updateOutput(`<p>A wild beast appears with ${beastHealth} health!</p>`);

                while (beastHealth > 0 && this.character.health > 0) {
                    const attack = confirm("Do you attack the beast?");

                    if (attack) {
                        const special = this.character.specialAbility();
                        if (this.character.charClass === "Rogue" && special.includes("avoids")) {
                            this.updateOutput("<p>You avoided the beast's attack!</p>");
                        } else {
                            const playerDamage = this.character.damage;
                            beastHealth -= playerDamage;
                            this.updateOutput(`<p>You ${special} and hit the beast for ${playerDamage} damage. Beast's health is now ${beastHealth}.</p>`);

                            if (beastHealth > 0) {
                                const beastDamage = Math.floor(Math.random() * 11) + 5;
                                this.character.health -= beastDamage;
                                this.updateOutput(`<p>The beast attacks you for ${beastDamage} damage. Your health is now ${this.character.health}.</p>`);
                            }
                        }
                    } else {
                        this.updateOutput("<p>You ran away from the beast.</p>");
                        return;
                    }
                }

                if (beastHealth <= 0) {
                    this.updateOutput("<p>You defeated the beast and found a claw as a trophy.</p>");
                    this.character.inventory.push("beast claw");
                }

                if (this.character.health <= 0) {
                    this.updateOutput("<p>You have perished. Game over.</p>");
                    this.endGame();
                }
            }

            rest() {
                const heal = Math.floor(Math.random() * 16) + 10;
                this.character.health = Math.min(this.character.charClass === "Warrior" ? 150 : 100, this.character.health + heal);
                this.updateOutput(`<p>You rested and regained ${heal} health. Your health is now ${this.character.health}.</p>`);
            }

            exitGame() {
                this.updateOutput("<p>Thank you for playing!</p>");
                this.endGame();
            }

            endGame() {
                document.getElementById("actions").innerHTML = "";
            }
        }

        const game = new Game();
    </script>
</body>
</html>
